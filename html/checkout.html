<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout Form</title>
    <link rel="stylesheet" href="../css/checkout/checkout.css">
    <link rel="stylesheet" href="../assets/fontawesome-free-6.5.1-web/css/all.min.css">
</head>

<body>
    <div class="form-container">
        <form id="checkout-form" action="" method="post">
            <div class="container">
                <h3>Địa Chỉ Nhận Hàng</h3>
                <hr>
                <div class="form-group">
                    <span id="diachi">
                        <b>Nguyễn Minh Trí (+84) 394080644</b> Số 907a, Âu Cơ, Phường Tân Sơn Nhì, Quận Tân Phú, TP. Hồ Chí Minh
                    </span>
                    <div class="popup">
                        <button type="button" class="popupbutton" onclick="changeAddressTmp();popupToggle(`diachiMenu`);popupToggle(`addressMenu`);getChecked()">Thay đổi</button>
                        <div class="popupwrapper" id="diachiMenu">
                            <div class="popupbg"></div>
                            <div class="popupmenu" id="addressMenu">
                                <div>
                                    <h3>Địa Chỉ Của Tôi</h3>
                                    <hr>
                                </div>

                                <div class="address-container">
                                    <label class="address-select">
                                        <input type="radio" name="address" onclick="changeAddressTmp();" checked />
                                        <span id="name">Nguyễn Minh Trí</span>
                                        <span id="sdt">(+84) 394080644</span>
                                        <span class="update" id="updatebig" onclick="fetchUpdateAddress(this);popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Cập nhật</span>
                                        <span id="diachi">Số 907a, Âu Cơ</span>
                                        <span id="tinh">Phường Tân Sơn Nhì, Quận Tân Phú, TP. Hồ Chí Minh</span>
                                        <span class="update" id="updatesmall" onclick="popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Cập nhật</span>
                                    </label>
                                    <label class="address-select">
                                        <input type="radio" name="address" onclick="changeAddressTmp();" />
                                        <span id="name">Nguyễn Minh Trí</span>
                                        <span id="sdt">(+84) 123123123</span>
                                        <span class="update" id="updatebig" onclick="popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Cập nhật</span>
                                        <span id="diachi">123 Âu Cơ</span>
                                        <span id="tinh">Phường Tân Sơn Nhì, Quận Tân Phú, TP. Hồ Chí Minh</span>
                                        <span class="update" id="updatesmall" onclick="popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Cập nhật</span>
                                    </label>


                                </div>
                                <div style="display: flex;flex-direction:row-reverse;">
                                    <button type="button" class="confirm" onclick="changeAddress();popupToggle(`diachiMenu`);popupOff(`addressMenu`)">Xác Nhận</button>
                                    <button type="button" class="cancel" onclick="changeChecked();popupToggle(`diachiMenu`);popupOff(`addressMenu`)">Hủy</button>

                                </div>
                            </div>
                            <div class="popupmenu" id="changeAddressMenu">
                                <div>
                                    <h3>Cập nhật địa chỉ</h3>
                                    <hr>
                                </div>
                                <div>
                                    <div class="update-container">
                                        <fieldset style="flex:0 0 calc(50% - 1.5em - 12px);">
                                            <legend>Họ và tên</legend>
                                            <input type="text" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%">
                                        </fieldset>
                                        <fieldset style="flex:0 0 calc(50% - 1.5em - 12px);margin-left:auto;">
                                            <legend>Số điện thoại</legend>
                                            <input type="text" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%">
                                        </fieldset>

                                        <fieldset class="fieldselect" style="margin:0 auto 0 0;">
                                            <legend>Tỉnh/Thành phố</legend>
                                            <select id="tinhthanh" name="tinhthanh" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%;" onchange="changeQuanHuyen()">
                                                <option>Chọn Tỉnh/Thành phố</option>
                                                <option value="tp_hochiminh">TP. Hồ Chí Minh</option>
                                                <option value="ha_noi">Hà Nội</option>

                                            </select>
                                        </fieldset>
                                        <fieldset class="fieldselect" style="margin:0 auto;">
                                            <legend>Quận/huyện</legend>
                                            <select id="quanhuyen" name="quanhuyen" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%" onchange="changePhuongXa()">
                                            </select>
                                        </fieldset>
                                        <fieldset class="fieldselect" style="margin:0 0 0 auto;">
                                            <legend>Phường/xã</legend>
                                            <select id="phuongxa" name="phuongxa" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%">
                                            </select>

                                        </fieldset>
                                        <fieldset style="flex:0 0 calc(100% - 1.5em - 6px);margin-top:10px">
                                            <legend>Địa chỉ cụ thể</legend>
                                            <input type="text" style="border: none;outline:none;padding:0;font-size :1.2em;width:100%">
                                        </fieldset>
                                    </div>

                                </div>
                                <div style="display: flex;flex-direction:row-reverse;padding-top:5px">
                                    <button type="button" class="confirm" onclick="popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Xác Nhận</button>
                                    <button type="button" class="cancel" onclick="popupToggle(`changeAddressMenu`);popupToggle(`addressMenu`)">Hủy</button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <!-- <div class="container">
                <h3>PHƯƠNG THỨC VẬN CHUYỂN</h3>
                <hr>
            </div> -->
            <div class="container">
                <h3>PHƯƠNG THỨC THANH TOÁN</h3>
                <hr>
                <input id="id4" type="radio" name="id_test" value="" checked />
                <label for="id4"><i class="fa-solid fa-dong-sign"></i>Thanh toán bằng tiền mặt khi nhận hàng</label>
            </div>
            <div class="container">
                <h3>MÃ KHUYẾN MÃI/MÃ QUÀ TẶNG</h3>
                <hr>
                <div class="form-group">
                    <label for="promotion">Mã KM/Quà tặng</label>
                    <div id="promo-container">
                        <input type="promo" id="promotion" name="promotion">
                        <button type="button">Áp dụng</button>
                    </div>
                    <!-- <div class="popup">
                        <u style="color:#2f80ed;" onclick="popupToggle()">Chọn mã khuyến mãi</u>
                        <div class="popupwrapper" id="menuKM">
                            <div class="popupbg" onclick="popupToggle()"></div>
                            <div class="popupmenu">
                                <div class="form-group" style="margin:10px;margin-left:20px" >
                                <i class="fa-solid fa-ticket" style="color:#2f80ed;float:left;font-size:20px;margin-right:10px"></i>
                                <span style="color:black;float:left;">CHỌN MÃ KHUYẾN MÃI</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <label>&nbsp;</label>
                    <p>Có thể áp dụng đồng thời nhiều mã &nbsp;<i class="fa-solid fa-circle-exclamation"></i></p> -->
                </div>
            </div>
            <!-- make this a different php file -->
            <div class="container">
                <h3>KIỂM TRA LẠI ĐƠN HÀNG</h3>
                <hr>
                <div class="sanpham">
                    <img src="https://bizweb.dktcdn.net/100/363/455/products/bat-tre-dong-xanh-14x20-5.jpg?v=1708501310000" />
                    <span class="bookname">Book namenamenamenamenamename</span>
                    <div class="cost">
                        <div class="book-price">
                            <span class="price">70.200 &#8363;</span>
                            <!-- <span class="old-price">120.000 &#8363;</span> -->
                        </div>
                        <span class="soluong">1</span>
                        <span class="booktotal">70.200 &#8363;</span>
                    </div>
                </div>
                <hr>
                <div class="sanpham">
                    <img src="https://bizweb.dktcdn.net/100/363/455/products/bat-tre-dong-xanh-14x20-5.jpg?v=1708501310000" />
                    <span class="bookname">Book namenamenamenamenamename</span>
                    <div class="cost">
                        <div class="book-price">
                            <span class="price">70.200 &#8363;</span>
                            <!-- <span class="old-price">120.000 &#8363;</span> -->
                        </div>
                        <span class="soluong">1</span>
                        <span class="booktotal">70.200 &#8363;</span>
                    </div>
                </div>
                <div class="form-group">
                </div>
            </div>
            <div class="container" id="total-bottom">
                <div class="total">
                    <div class="chiphi">
                        <span class="cost-name">Thành tiền </span>
                        <span class="money">192.700 &#8363;</span><br>
                    </div>
                    <div class="chiphi">
                        <span class="cost-name">Giảm giá (Nhập mã thành công - Mã giảm giá 10K TOẢN SẢN - Đơn hàng từ 150K)</span>
                        <span class="money">-10.000 &#8363;</span><br>
                    </div>
                    <div class="chiphi">
                        <span class="cost-name">Phí vận chuyển (Giao hàng tiêu chuẩn)</span>
                        <span class="money">19.000 &#8363;</span><br>
                    </div>
                    <div class="chiphi" id="tong">
                        <span class="cost-name">Tổng Số Tiền (gồm VAT)</span>
                        <span class="money" id="tong-tien">201.700 &#8363;</span><br>
                    </div>
                </div>
            </div>
            <div class="container" id="dieukhoan-bottom" style="display: flex;">
                <div class="dieukhoan" >
                    <i class="fa-solid fa-square-check" style="color:#ca3f3f;font-size:20px;padding:7px;flex:0 0 5%;"></i>
    
                    <span style="word-wrap: break-word;flex:0 0 85%;">
                        Bằng việc tiến hành Mua hàng, Bạn đã đồng ý với
                        <a href="">Điều khoản & Điều kiện của Placeholder</a>
                    </span>
                </div>
            </div>
    </div>
    <div class="form-submit">
        <div class="total" id="total-fixed">
            <div class="chiphi">
                <span class="cost-name">Thành tiền </span>
                <span class="money">192.700 &#8363;</span><br>
            </div>
            <div class="chiphi">
                <span class="cost-name">Giảm giá (Nhập mã thành công - Mã giảm giá 10K TOẢN SẢN - Đơn hàng từ 150K)</span>
                <span class="money">-10.000 &#8363;</span><br>
            </div>
            <div class="chiphi">
                <span class="cost-name">Phí vận chuyển (Giao hàng tiêu chuẩn)</span>
                <span class="money">19.000 &#8363;</span><br>
            </div>
            <div class="chiphi" id="tong">
                <span class="cost-name">Tổng Số Tiền (gồm VAT)</span>
                <span class="money" id="tong-tien">201.700 &#8363;</span><br>
            </div>
        </div>
        <hr style=" width: 100%;flex-shrink: 0;" id="line-fixed">
        <div class="dieukhoan" id="dieukhoan-fixed">
            <i class="fa-solid fa-square-check" style="color:#ca3f3f;font-size:20px;padding:7px"></i>
            <span>
                <span>Bằng việc tiến hành Mua hàng, Bạn đã đồng ý với</span> <br>
                <a href="">Điều khoản & Điều kiện của Placeholder</a>
            </span>
        </div>
        <button type="submit">Xác nhận thanh toán</button>
    </div>
    </form>
    </div>
    <script src="../js/checkout.js"></script>
    <script>
        function popupToggle(idname) {
            var popup = document.getElementById(idname);
            popup.classList.toggle("show");
        }

        function popupOn(idname) {
            var popup = document.getElementById(idname);
            if (!popup.classList.contains("show")) {
                popup.classList.toggle("show");
            }
        }

        function popupOff(idname) {
            var popup = document.getElementById(idname);
            if (popup.classList.contains("show")) {
                popup.classList.toggle("show");
            }
        }
        var checkedAddress;

        function getChecked() {
            checkedAddress = document.querySelector("input[name=address]:checked");
        }

        function changeChecked() {
            checkedAddress.checked = true;
        }
        var addressTmp = "";

        function changeAddressTmp() {
            var checked = document.querySelector("input[name=address]:checked").parentNode;
            addressTmp = "<b>" + checked.querySelector("#name").innerHTML + ' ' + checked.querySelector("#sdt").innerHTML + "</b> " + checked.querySelector("#diachi").innerHTML + ' ' + checked.querySelector("#tinh").innerHTML;
        }

        function changeAddress() {
            var diachi = document.getElementById("diachi");
            diachi.innerHTML = addressTmp;
        }
        var updateAddress;

        function fetchUpdateAddress(element) {
            updateAddress = element.parentNode;
        }
    </script>
    <script>
        var quanHuyenData = {
            "tp_hochiminh": ["Quận 1", "Quận 2", "Quận 3"], // Dữ liệu quận/huyện cho TP. Hồ Chí Minh
            "ha_noi": ["Quận Ba Đình", "Quận Hoàn Kiếm", "Quận Hai Bà Trưng"] // Dữ liệu quận/huyện cho Hà Nội
            // Thêm dữ liệu cho các tỉnh/thành phố khác ở đây
        };

        var phuongXaData = {
            "Quận 1": ["Phường Bến Nghé", "Phường Cầu Kho"], // Dữ liệu phường/xã cho Quận 1
            "Quận 2": ["Phường Thảo Điền", "Phường An Phú"] // Dữ liệu phường/xã cho Quận 2
            // Thêm dữ liệu cho các quận/huyện khác ở đây
        };

        function changeQuanHuyen() {
            var tinhThanh = document.getElementById("tinhthanh").value;
            var quanHuyenSelect = document.getElementById("quanhuyen");
            quanHuyenSelect.innerHTML = "";
            var quanHuyenArray = quanHuyenData[tinhThanh];
            if (quanHuyenArray) {
                for (var i = 0; i < quanHuyenArray.length; i++) {
                    var option = document.createElement("option");
                    option.text = quanHuyenArray[i];
                    quanHuyenSelect.add(option);
                }
            }
            // changePhuongXa(); // Gọi hàm này để cập nhật dữ liệu cho select thứ 3
        }

        function changePhuongXa() {
            var quanHuyen = document.getElementById("quanhuyen").value;
            var phuongXaSelect = document.getElementById("phuongxa");
            phuongXaSelect.innerHTML = "";
            var phuongXaArray = phuongXaData[quanHuyen];
            if (phuongXaArray) {
                for (var i = 0; i < phuongXaArray.length; i++) {
                    var option = document.createElement("option");
                    option.text = phuongXaArray[i];
                    phuongXaSelect.add(option);
                }
            }
        }
    </script>
</body>

</html>